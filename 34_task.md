# Строим модель данных

Задача: реализовать модель данных БД, определить сущности, построить связи, выполнить декомпозицию и нормализацию
За основу берем практическую структуру данных с заказчиками интернет магазина (файл some_customers.csv.gz).

Текущая структура данных неоптимальна:

- нет типизации - почти все поля хранятся как строки
- данные не нормализованы - данные о адресе и человеке хранятся в одной таблице, на одного человека может приходится несколько адресов
- Попытаться выделить следующие сущности: страны, города, улицы, дома и другие, которые посчитаете нужными.

Описанные сущности не являются полным и конечным ТЗ (как это и бывает в жизни). Вы, как архитектор, должны предусмотреть необходимые атрибуты и дополнительные сущности по необходимости. И четко представлять бизнес-задачу, которую будет решать эта структура данных.
делаем декомпозицию и нормализацию
в качестве сделанной ДЗ принимается pdf с начальной и конечной моделью.
Решая данное ДЗ, вы тренируете навык проектирования БД, выделения сущностей и их атрибутов, построения связей, нормализации данных.

---

**Текущая схема данных**: 

Данные в EXCEL: 
https://docs.google.com/spreadsheets/d/1oxdRpe3YIQjllMXO_E96kBTp-P0cBqO0TMCPIOmGOts/edit?usp=sharing  

Я полагаю, что данный csv - это всё-таки результат выгрузки запроса из 2х таблиц, а не из одной, т.к. было бы сложно получить данные именно в таком вот виде, где на одного пользователя приходится 2 адреса, причём во второй строке данных пользователя нет, а есть только адрес. Непонятно, как могли вообще так заводить данные: у адреса по любому должна была быть ссылка на пользователя. 
Либо второй вариант: база данных по клиентам изначально велась в EXCEL, тогда понятно, как мог появиться такой формат данных.

Текущая схема данных:
https://dbdiagram.io/d/63499334f0018a1c5f08064b 

Сейчас выделяются 2 сущности:

1. Пользователи
1. Адреса 

**Новая схема данных**: https://dbdiagram.io/d/6346cef9f0018a1c5fec857b 

Выделены следующие сущности:

| Название | Что содержит | Тип |
| ------ | ------ | ------ |
| titles | обращения | справочник |
| languages | языки | справочник |
| countries | страны | справочник |
| postal_codes | почтовые коды | справочник со ссылкой на страну |
| regions | регионы | справочник со ссылкой на страну |
| cities | города | справочник со ссылками на страну и регион |
| streets | улицы | справочник со ссылкой на город |
| houses | дома | справочник со ссылкой на улицу |
| marital_statuses | семейное положение | справочник |
| genders | пол | справочник |
| users | пользователи | производная таблица |
| user_adresses | связь пользователя с компонентами адреса | производная таблица |
